(()=>{window.encrypt=e=>window.btoa(unescape(encodeURIComponent(e))),window.decrypt=e=>decodeURIComponent(escape(window.atob(e)));const t={initWidget(){const a=$(".column-right"),n=$(".column-right-shadow");if(a.length&&n.length){const i=$(window);function e(){var e=i.width(),t=0<n.children().length;e<1216&&!t?(a.children().detach().appendTo(n),n.addClass("is-active")):1216<=e&&t&&(n.children().detach().appendTo(a),n.removeClass("is-active"))}$(window).on("resize",function(a){let n;return function(){const e=this,t=arguments;clearTimeout(n),n=setTimeout(function(){a.apply(e,t)},50)}}(e)),e()}},initTocAndNotice(){var e=location["pathname"],t=(window.tocPjax&&window.tocPjax(),0===$(".widget.toc .card-content ul").length),e="toc"===DreamConfig.notice_show_mode&&!t||"index"===DreamConfig.notice_show_mode&&"/"!==e;t?$(".widget.toc,.action-toc").addClass("is-hidden-all"):$(".widget.toc,.action-toc").removeClass("is-hidden-all"),e?$(".widget.notice").addClass("is-hidden-all"):$(".widget.notice").removeClass("is-hidden-all")},initBanner(){const i=$(".banner-info-desc");if(0!==i.length){const o=i.text();i.text("");let t,a="",n=!0;const s=function(){var e=a.length;n&&e<o.length?(a+=o.charAt(e),i.text(a)):!n&&0<e?(a=a.slice(0,e-1),i.text(a)):(clearInterval(t),n=!n,t=setInterval(s,n?500:80))};t=setInterval(s,n?500:80)}},initGallery(){$(".main-content img:not(.not-gallery)").each(function(){var e=$(this),t=e.attr("src"),a=(e.attr("alt"),e.attr("srcset"));DreamConfig.lazy_enable&&(e.attr("data-src",t),e.attr("data-srcset",a),e.addClass("lazyload")),0===$(this).parents("[data-fancybox],mew-photos").length&&(DreamConfig.lazy_enable&&(e.removeAttr("src"),e.removeAttr("srcset")),$(this).wrap(`<div class="gallery-item"><div data-fancybox="gallery" data-options='{"hash": false}' ${this.alt?`data-caption="${this.alt}"`:""} href="${t}"></div>${this.alt&&DreamConfig.show_img_name?`<p>${this.alt}</p>`:""}</div>`))})},initMode(){let t="true"===(e=localStorage.getItem("night"))||"false"===e?"true"===localStorage.getItem("night"):"night"===DreamConfig.default_theme||"system"===DreamConfig.default_theme&&matchMedia("(prefers-color-scheme: dark)").matches;var e;const a=e=>{e?$("html").addClass("color-scheme-dark").removeClass("color-scheme-light").addClass("night").attr("night",!0):$("html").addClass("color-scheme-light").removeClass("color-scheme-dark").removeClass("night").removeAttr("night"),localStorage.setItem("color-scheme",e?"dark":"light"),localStorage.setItem("special-efficacy-scheme",e?"dark":"light"),t=e};$("#toggle-mode").on("click",()=>{a(!t),localStorage.setItem("night",t)}),a(t)},initNavbar(){var t=$(".navbar-nav a"),e=$(".panel-side-menu .link");let a=0;var{href:n,pathname:i}=location;if(i&&"/"!==i)for(let e=0;e<t.length;e++){const o=t[e].getAttribute("href");if((i.includes(o)||n.includes(o))&&(a=e,i===o||n===o))break}const o=t.eq(a);o.addClass("current"),o.parents(".item-dropdown").length&&o.parents(".item-dropdown").find(".item-dropdown-link a").addClass("current"),e.eq(a).addClass("current")},searchDialog(){const t=$(".navbar-search .result");$(".navbar-search .input").on("click",function(e){e.stopPropagation(),t.addClass("active")}),$(document).on("click",function(){t.removeClass("active")})},initDropMenu(){$(".item-dropdown").each(function(e,t){var a=$(this).find(".item-dropdown-menu"),n=$(t).attr("trigger")||"click",t=$(t).attr("placement")||$(this).height()||0;a.css("top",t),"hover"===n?$(this).hover(()=>$(this).addClass("active"),()=>$(this).removeClass("active")):($(this).on("click",function(e){e.stopPropagation(),$(this).toggleClass("active"),$(document).one("click",()=>$(this).removeClass("active")),e.stopPropagation()}),a.on("click",e=>e.stopPropagation()))})},iniTaskItemDisabled(){$('li[data-type="taskItem"]').each(function(){$(this).find('label > input[type="checkbox"]').prop("disabled",!0)})},initLogonMenu(){$(".navbar-logon").each(function(e,t){"hover"===($(t).attr("trigger")||"click")?$(this).hover(()=>$(this).addClass("active"),()=>$(this).removeClass("active")):$(this).on("click",function(e){e.stopPropagation(),$(this).toggleClass("active"),$(document).one("click",()=>$(this).removeClass("active")),e.stopPropagation()})})},initScroll(){window.initTop=0,document.addEventListener("scroll",()=>{const e=$(document).scrollTop(),t=(i=e>window.initTop,window.initTop=e,i),a=$("body"),n=$(".actions");var i;50<e&&t?a.addClass("move-up"):a.removeClass("move-up"),100<e?n.addClass("show"):n.removeClass("show")})},drawerMobile(){$(".navbar-slideicon").on("click",function(e){e.stopPropagation(),$(".navbar-searchout").removeClass("active");var e=$("html"),t=$(".navbar-mask"),a=$(".navbar-slideout");a.hasClass("active")?(e.removeClass("disable-scroll"),t.removeClass("active slideout"),a.removeClass("active")):(e.addClass("disable-scroll"),t.addClass("active slideout"),a.addClass("active"))}),$(".action-toc").on("click",function(e){e.stopPropagation(),$(".navbar-searchout").removeClass("active");var e=$("html"),t=$(".navbar-mask"),a=$(".navbar-slideout");a.hasClass("active")?(e.removeClass("disable-scroll"),t.removeClass("active slideout"),a.removeClass("active slideout-toc")):(e.addClass("disable-scroll"),t.addClass("active slideout"),a.addClass("active slideout-toc"))})},back2Top(){$("#back-to-top").on("click",function(){$("body, html").animate({scrollTop:0},400)})},maskClose(){$(".navbar-mask").on("click",function(e){e.stopPropagation(),$("html").removeClass("disable-scroll"),$(".navbar-mask").removeClass("active slideout"),$(".navbar-searchout").removeClass("active"),$(".navbar-slideout").removeClass("active slideout-toc"),$(".navbar-above").removeClass("solid")}).on("touchmove",e=>e.preventDefault),$(".navbar .toc-content").on("click",function(e){e.stopPropagation(),$("html").removeClass("disable-scroll"),$(".navbar-mask").removeClass("active slideout"),$(".navbar-slideout").removeClass("active slideout-toc")})},sideMenuMobile(){$(".navbar-slideout-menu .current").parents(".panel-body").show().siblings(".panel").addClass("in"),$(".navbar-slideout-menu .panel").on("click",function(e){e.stopPropagation();var e=$(this),t=e.parent().parent();t.find(".panel").not(e).removeClass("in"),t.find(".panel-body").not(e.siblings(".panel-body")).stop().hide("fast"),e.toggleClass("in").siblings(".panel-body").stop().toggle("fast")})},initEvent(){var e=$("body");function a(e){var e=$(e),t=e.attr("data-close");return t&&""!==t.trim()?e.closest(t.trim()):e}e.on("click",".click-close",function(e){e.stopPropagation(),a(this).remove()}),e.on("click",".click-animation-close",function(e){e.stopPropagation();let t=a(this);t.addClass("close-animation"),setTimeout(()=>t.remove(),300)})},offscreenTip(){if(!Utils.isMobile()&&(DreamConfig.document_hidden_title||DreamConfig.document_visible_title)){let e=document.title,t=null;document.addEventListener("visibilitychange",function(){document.hidden?(DreamConfig.document_visible_title&&document.title===DreamConfig.document_visible_title||(e=document.title),document.title=DreamConfig.document_hidden_title||e,clearTimeout(t)):(document.title=DreamConfig.document_visible_title||e,DreamConfig.document_visible_title&&(t=setTimeout(function(){document.title===DreamConfig.document_visible_title&&(document.title=e)},2e3)))})}},initCarousel(){window.Swiper&&new Swiper(".swiper",{loop:!0,parallax:!0,effect:"slide",spaceBetween:10,speed:600,autoplay:{delay:3e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})},closeFancybox(){document.querySelector(".fancybox-container")&&$.fancybox.close()},sparkInput(){const a=DreamConfig.spark_input_content&&DreamConfig.spark_input_content.filter(e=>0<e.length);a&&0<a.length&&Utils.cachedScript(DreamConfig.theme_base+"/js/spark-input.min.js?mew="+DreamConfig.theme_version,function(){$(".spark-input").each((e,t)=>sparkInput(t,[t.innerText,...a]))})},loveTime(){let c=$(".love .love-time");if(0!==c.length){var e=c.attr("data-time");if(/^\d{4}\/\d{2}\/\d{2} \d{2}:\d{2}:\d{2}$/.test(e)){const d=new Date(e);setInterval(function(){var e=new Date(Date.now()),t=parseInt((e-d)/1e3),a=t%60,n=(t=parseInt(t/60))%60;let i=(t=parseInt(t/60))%24,o=parseInt(t/24),s=0,r=d.getFullYear(),l=e.getFullYear();for(;r<l;){if(r%4==0&&r%100!=0||r%400==0){if(o<366)break;o-=366}else{if(o<365)break;o-=365}s+=1,r+=1}0!==s?c.html(`${s} 年 ${o} 天 ${i} 时 ${n} 分 ${a} 秒`):c.html(o+` 天 ${i} 时 ${n} 分 ${a} 秒`)},300)}else c.text(e)}},websiteTime(){if(DreamConfig.website_time){const s=document.getElementById("websiteDate");if(""!==DreamConfig.website_time){const r=new Date(DreamConfig.website_time).getTime();setInterval(function(){let e=Date.now(),t=parseInt((e-r)/1e3),a=t%60,n=(1===String(a).length&&(a="0"+a),(t=parseInt(t/60))%60),i=(1===String(n).length&&(n="0"+n),(t=parseInt(t/60))%24);1===String(i).length&&(i="0"+i);var o=parseInt(t/24);s.innerHTML=`建站<span class="stand">${o}</span>天<span class="stand">${i}</span>时<span class="stand">${n}</span>分<span class="stand">${a}</span>秒`},300)}}},webCopyright(){var e,t,a;DreamConfig.website_time&&(e=document.getElementById("webCopyright"),t=(new Date).getFullYear(),a=new Date(DreamConfig.website_time).getFullYear(),e.innerText=t!==a?"© "+a+"-"+t:"© "+t)},initTimeCount(){if($(".timelife").length&&o!==(new Date).getHours()){var e=[{title:"今日已经过去",endTitle:"小时",num:0,percent:"0%"},{title:"这周已经过去",endTitle:"天",num:0,percent:"0%"},{title:"本月已经过去",endTitle:"天",num:0,percent:"0%"},{title:"今年已经过去",endTitle:"个月",num:0,percent:"0%"}],t=(+new Date-new Date((new Date).toLocaleDateString()).getTime())/1e3/60/60,n=(o=t)/24*100,t=(e[0].num=parseInt(t),e[0].percent=parseInt(n)+"%",{0:7,1:1,2:2,3:3,4:4,5:5,6:6}[(new Date).getDay()]),n=t/7*100,t=(e[1].num=parseInt(t),e[1].percent=parseInt(n)+"%",(new Date).getFullYear()),n=(new Date).getDate(),i=(new Date).getMonth()+1,t=n/new Date(t,i,0).getDate()*100,i=(e[2].num=n,e[2].percent=parseInt(t)+"%",(new Date).getMonth()+1),n=i/12*100;e[3].num=i,e[3].percent=parseInt(n)+"%";let a="";e.forEach((e,t)=>{a+=`
						<div class="item">
							<div class="title">
								${e.title}
								<span class="text">${e.num}</span>
								${e.endTitle}
							</div>
							<div class="progress">
								<div class="progress-bar">
									<div class="progress-bar-inner progress-bar-inner-${t}" style="width: ${e.percent}"></div>
								</div>
								<div class="progress-percentage">${e.percent}</div>
							</div>
						</div>`}),$(".aside-timelife").html(a)}},initSecurityLink(){DreamConfig.enable_security_link&&DreamConfig.security_link_url&&0!==DreamConfig.security_link_url.length&&$(document).on("click","a[href]:not([data-url-security]), hyperlink-inline-card[href]:not([data-url-security]), hyperlink-card[href]:not([data-url-security])",e=>{var t,a=$(e.currentTarget).attr("href");a&&(a.toLowerCase().startsWith("http://")||a.toLowerCase().startsWith("https://"))&&(t=a,[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx",".zip",".rar",".7z",".tar",".gz",".bz2",".dmg",".exe",".msi",".iso",".apk"].some(e=>t.toLowerCase().endsWith(e))?(e.preventDefault(),window.open(a,"_blank")):((e,t)=>{let i;(e=e.toLowerCase().trim()).startsWith("//")?e=window.location.protocol+e:e.startsWith("/")&&(e=window.location.origin+e),(e.startsWith("http://")||e.startsWith("https://"))&&(e=e.replace(/\/$/,""));try{i=new URL(e).hostname}catch(e){return!1}return t.some(e=>{var t,a,n;return e.startsWith("*.")?(a=(t=e.slice(2)).split("."),(n=i.split(".")).length>a.length&&n.slice(-a.length).join(".")===t):i===e})})(a,DreamConfig.security_link_whitelist)||(e.preventDefault(),window.open(DreamConfig.security_link_url+"?target="+encodeURIComponent(a),"_blank")))})},initGrayMode(){if(!0===DreamConfig.gray_mode)$("html").addClass("gray-mode");else if("custom"===DreamConfig.gray_mode&&DreamConfig.gray_mode_time_list){const r=new Date,e=r.getMonth()+1,t=r.getDate();for(const a of DreamConfig.gray_mode_time_list)try{if(((e,t,a)=>{var n,i,[o,s]=a.time.split("|").map(e=>e.trim());return!!(o&&s&&([o,n]=o.split("/").map(e=>e.trim()).map(Number),[s,i]=s.split("/").map(e=>e.trim()).map(Number),o)&&n&&s&&i)&&(o=new Date(r.getFullYear(),o-1,n),n=new Date(r.getFullYear(),s-1,i),(i=o<=(s=new Date(r.getFullYear(),e-1,t))&&s<=n)&&a.desc&&Qmsg.info(a.desc),i)})(e,t,a)){$("html").addClass("gray-mode");break}}catch(e){console.log(e)}}},initEffects(){Utils.isMobile()||(DreamConfig.cursor_move&&Utils.cachedScript(`${DreamConfig.theme_base}/js/cursor/move/${DreamConfig.cursor_move}.min.js?mew=`+DreamConfig.theme_version),DreamConfig.cursor_click&&Utils.cachedScript(`${DreamConfig.theme_base}/js/cursor/click/${DreamConfig.cursor_click}.min.js?mew=`+DreamConfig.theme_version),DreamConfig.enable_live2d&&Utils.cachedScript(DreamConfig.theme_base+"/js/autoload.min.js?mew="+DreamConfig.theme_version),DreamConfig.effects_lantern_mode&&Utils.cachedScript(DreamConfig.theme_base+"/js/effects/lantern.min.js?mew="+DreamConfig.theme_version),DreamConfig.effects_sakura_mode&&Utils.cachedScript(DreamConfig.theme_base+"/js/effects/sakura.min.js?mew="+DreamConfig.theme_version),DreamConfig.effects_snowflake_mode&&Utils.cachedScript(DreamConfig.theme_base+"/js/effects/snowflake.min.js?mew="+DreamConfig.theme_version),DreamConfig.effects_universe_mode&&Utils.cachedScript(DreamConfig.theme_base+"/js/effects/universe.min.js?mew="+DreamConfig.theme_version),DreamConfig.effects_circle_magic_mode&&Utils.cachedScript(DreamConfig.theme_base+"/js/effects/circleMagic.min.js?mew="+DreamConfig.theme_version),DreamConfig.effects_quantum_silk_thread_mode&&Utils.cachedScript(DreamConfig.theme_base+"/js/effects/quantum.min.js?mew="+DreamConfig.theme_version))},showThemeVersion(){DreamConfig.enable_console_version_info&&window.logger(`%c页面加载耗时：${Math.round(performance.now())}ms | Theme By Dream2 Plus `+DreamConfig.theme_version,"color:#fff; background: linear-gradient(270deg, #986fee, #8695e6, #68b7dd, #18d7d3); padding: 8px 15px; border-radius: 0 15px 0 15px")},showBanner(e=location.pathname){var t=document.querySelector(".banner"),a=document.querySelector(".section");t&&("/"!==e?(t.classList.add("hidden"),a&&DreamConfig.header_fixed&&a.classList.add("section-top")):(t.classList.remove("hidden"),a&&DreamConfig.header_fixed&&a.classList.remove("section-top")))},playBannerVideo(){var t=document.querySelector(".banner video");function e(){try{var e;t.paused&&void 0!==(e=t.play())&&e.catch(function(e){console.log("视频播放失败:",e)})}catch(e){console.log("播放错误:",e)}}function a(e,t,a){function n(){a(),e.removeEventListener?e.removeEventListener(t,n):e.detachEvent&&e.detachEvent("on"+t,n)}e.addEventListener?e.addEventListener(t,n):e.attachEvent&&e.attachEvent("on"+t,n)}t&&(t.loop=!0,t.muted=!0,t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline",""),t.addEventListener("ended",function(){t.currentTime=0,e()},!1),a(document,"click",e),a(document,"touchend",e),e())}};window.commonContext=t;let o=-1;{const a=["initCarousel","sparkInput","websiteTime","playBannerVideo"],n=["initEffects","showThemeVersion","iniTaskItemDisabled"];Object.keys(t).forEach(e=>!a.includes(e)&&!n.includes(e)&&t[e]()),document.addEventListener("DOMContentLoaded",function(){$("html").addClass("loaded"),a.forEach(e=>t[e]&&t[e]())}),window.addEventListener("load",function(){n.forEach(e=>t[e]&&t[e]()),$("html").addClass("ready")})}})();